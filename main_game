"
@author: jshands
"


import pygame
from player_class import Player
from projectile import Projectile


pygame.init()

gameDisplay = pygame.display.set_mode((500,480))

screenWidth = 500

# Game Display Caption
pygame.display.set_caption("Adventures of Cricket")

# Sets FPS
clock = pygame.time.Clock() 

game_on = True


projectiles = [] 

# projectile = Projectile(cricket.x, cricket.y, )

# Player class (x, y, width, height)
cricket = Player(300, 410, 65, 65)

cricket.draw_player(gameDisplay) 


        # self.draw_projectile(gameDisplay)
        
        # for projectile in projectiles: 
            # projectile.draw_projectile(gameDisplay)
        


# Main Loop 
while game_on: 
    
    # The time delay is in milliseconds
    # pygame.time.delay(50) 
    pygame.display.update() 
    clock.tick(27)
    
    for event in pygame.event.get(): 
        if event.type == pygame.QUIT: 
            game_on = False
    
    for projectile in projectiles: 
        if projectile.x < 500 and projectile.x > 0:
            projectile.x += projectile.velocity
            
        else: 
            projectiles.pop(projectiles.index[projectile])
    
    # Initializing the keys 
    keys = pygame.key.get_pressed() 
    
    if keys[pygame.K_SPACE]:
        if cricket.left: 
            facing = -1
        else: 
            facing = 1
        
        '''
        if len(projectiles) < 5: 
            projectiles.append(projectile(round(cricket.x + cricket.width//2),
            round(cricket.y + cricket.height.y//2), 6, (255, 0, 0), facing))
        '''
        
    if keys[pygame.K_LEFT] and cricket.x > cricket.velocity: 
        cricket.x -= cricket.velocity
        cricket.left = True 
        cricket.right = False
        cricket.standing = False
        
    elif keys[pygame.K_RIGHT] and cricket.x < screenWidth - cricket.width - cricket.velocity: 
        cricket.x += cricket.velocity
        cricket.left = False 
        cricket.right = True
        cricket.standing = False
    
    else:
        cricket.standing = True
        # cricket.left = False 
        # cricket.right = False 
        cricket.walkCount = 0 
        
    # If jump is False, you can move up and down     
    if not (cricket.jump):
        
        if keys[pygame.K_UP]: 
            cricket.jump = True
            cricket.left = False
            cricket.right = False 
            cricket.walkCount = 0
            
    else:
        if cricket.jumpHeight >= -10:
            # Moves up
            up_down = 1
            
            if cricket.jumpHeight < 0:
                # Moves down
                up_down = -1
                
            cricket.y -= (cricket.jumpHeight**2) * 0.5 * up_down
            cricket.jumpHeight -= 1
            
        else: 
            cricket.jump = False
            cricket.jumpHeight = 10
    
    # gameWindow()
    cricket.draw_player(gameDisplay)

pygame.quit()
quit() 
